(()=>{"use strict";var e={131:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=t.SettingId=void 0,(s=t.SettingId||(t.SettingId={})).EPIC_LINKS="jira_plus_epic_links",s.COLORED_EPICS="jira_plus_colored_epics",s.STYLING="jira_plus_styling",s.BRANCHNAMES="jira_plus_branchnames",(t.Messages||(t.Messages={})).SETTING_CHANGED="settings_changed"},37:(e,t,s)=>{s.r(t),s.d(t,{SettingsStorage:()=>n,listenForAllSettingsChanges:()=>i,listenForSettingChanges:()=>o,settingsStorage:()=>a});var n=class{constructor(){this.getSetting=(e,t)=>{chrome.storage.sync.get([e],(s=>{t&&t(s[e])}))},this.getSettings=(e,t)=>{chrome.storage.sync.get(e,(e=>{t&&t(e)}))},this.setSetting=(e,t,s)=>{chrome.storage.sync.set({[e]:t},(async()=>{(await chrome.tabs.query({url:"*://*.atlassian.net/*"})).forEach((s=>{s?.id&&chrome.tabs.sendMessage(s.id,{message:"settings_changed",settingId:e,value:t})})),s&&s(t)}))}}},r=(e=>(e.EPIC_LINKS="jira_plus_epic_links",e.COLORED_EPICS="jira_plus_colored_epics",e.STYLING="jira_plus_styling",e.BRANCHNAMES="jira_plus_branchnames",e))(r||{}),a=new n,o=e=>{chrome.runtime.onMessage.addListener(((t,s,n)=>{if("settings_changed"===t.message){const{settingId:s,value:n}=t;e[s]&&e[s](n)}}))},i=e=>{chrome.runtime.onMessage.addListener(((t,s,n)=>{"settings_changed"===t.message&&chrome.storage.sync.get(Object.values(r),(t=>{e(t)}))}))}}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=s(37),t=s(131),n=new MutationObserver((function(){e.settingsStorage.getSetting(t.SettingId.BRANCHNAMES,(e=>{e&&r()}))}));new MutationObserver((function(e,t){const s=document.querySelector(".atlaskit-portal-container");s&&(n.observe(s,{subtree:!0,childList:!0}),t.disconnect())})).observe(document.body,{childList:!0});const r=()=>{const e=document.querySelector('[data-testid="development-summary-branch.ui.create-branch-dropdown.git-command-section"]');if(e&&"true"!==e.dataset.jira_plus_set_branchnames){const t=e.querySelector('input[data-testid*="platform-copy-text-field"]'),s=null==t?void 0:t.value;if(!s)return;const n=document.querySelectorAll("#jira-issue-header nav ol > div");if(!n)return;const r=Array.from(n).map((e=>e.textContent)).filter((e=>/([A-Z]+-[0-9]+)/.test(null!=e?e:""))).join("/"),a=null==s?void 0:s.replace(/^(git checkout -b )([A-Z]+-[0-9]+)(\/|-)(.*)$/g,`$1${r}$3$4`);console.debug(`Replacing copy from '${s}' to ${a}`),t.value=a,e.dataset.jira_plus_set_branchnames="true"}}})()})();